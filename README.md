# Yooc_AutoExam

## 要求

- Python 3
- 所需的 Python 库：
  - `beautifulsoup4`
  - `pycryptodome`
  - `requests`
  - `urllib3`

你可以使用 `pip` 安装所需的库：

```bash
pip install -r requirements.txt
```

## 配置

配置文件 `config.json` 包含了你的凭证和自动考试的设置。你需要手动收集必要的信息并填入配置文件中。

```json
{
    "user_token": "",
    "sessionid": "",

    "examId": "",

    "time": 5,
    "accuracy": 100
}
```

`config.json` 文件中的参数：

- **user_token**：用户认证的令牌。
- **sessionid**：用于用户会话管理的会话 ID。
- **examId**：要参与的考试的 ID。
- **time**：预期的考试时长，单位为分钟。
- **accuracy**：预期的答题准确度（百分比，例如 80 表示 80%）。

### 如何获取所需的值：

#### `user_token` 和 `sessionid`：

1. 在浏览器中登录 [yooc.me](https://yooc.me/mobile/dashboard)。
2. 打开浏览器的 **开发者工具**（通常按 `F12` 或 `Ctrl+Shift+I`）。
3. 进入 **网络**（Network）标签，并查找 **Cookies**。
4. 在列表中找到 `user_token` 和 `sessionid`。
5. 复制它们的值并粘贴到 `config.json` 文件中。

#### `examId`：

1. 在浏览器中打开 **考试详情** 页面。
2. 再次打开 **开发者工具** 并进入 **网络** 标签。
3. 查找 URL 以 `https://exambackend.yooc.me/api/exam/list/get` 开头的请求。
4. 点击该请求，在 **响应** 部分会包含考试的 `examId`。
5. 复制 `examId` 值并粘贴到 `config.json` 文件中。

确保所有值都正确复制到 `config.json` 文件中，脚本才能正常运行。

## 使用方法

### 基础使用流程

1. 确保 `config.json` 文件已正确配置了你的凭证和偏好设置。

2. 运行脚本：

   ```bash
   python yooc_exam.py
   ```

   这将启动自动化考试。

3. 等待脚本考试结束。一般而言，等待时长大致与预期考试时长相等。

### 题库系统使用（推荐）

为了提高答题准确率，建议使用题库系统：

#### 第一步：建立题库

完成第一次考试后，运行题库构建脚本：

```bash
python build_question_bank.py
```

**功能说明**：
- 从考试结果API自动提取所有题目的正确答案
- 支持增量更新：只添加新题目，保留已有题目
- 生成 `question_bank.json` 文件保存题库

**输出示例**：
```
题库更新完成:
  - 总题目数: 100 题
  - 新增题目: 100 题
  - 更新题目: 0 题
  - 保持不变: 0 题
```

#### 第二步：使用题库答题

有了题库后，再次运行考试脚本：

```bash
python yooc_exam.py
```

脚本会自动：
- **单选题**：优先使用题库中的正确答案
- **多选题**：使用题库中的正确答案
- **填空题**：使用题库中的正确答案

**准确率提升**：从 ~40% 提升至 接近100%

#### 第三步：生成字母答案对照表（可选）

如果需要查看易读的字母答案（A/B/C/D），运行：

```bash
python convert_to_letters.py
```

**生成的文件**：
- `question_bank_readable.txt` - 按题型分类的详细文本格式（字母答案）

### 完整工作流程

```bash
# 1. 第一次做题（建立题库）
python yooc_exam.py                    # 首次考试

# 2. 提取答案建立题库
python build_question_bank.py          # 生成题库

# 3. 生成字母答案（可选）
python convert_to_letters.py           # 生成易读格式

# 4. 后续考试（使用题库）
python yooc_exam.py                    # 高准确率答题

# 5. 做新考试后更新题库
python build_question_bank.py          # 增量更新题库
```

## 注意事项

- 本脚本仅限于 **学习用途**。本人不对使用该脚本可能引发的任何后果负责。在使用脚本时，请确保遵守道德及所有相关法律、服务条款。
- 答题的准确度基于所期望的百分比。脚本会尝试调整答案以达到该准确度。
- 实际考试时长将会加入少量噪音以模拟人类的行为。

### 调整脚本中的噪声

脚本会在考试用时中加入噪声。此噪声基于 `yooc_exam.py` 中的 `noise` 参数的。

```python
noise = 0.1  # 延迟时间的噪声
```

默认值为 `0.1`，表示实际时长与预期时长之间有 10% 的偏差。你可以根据需要调整 `noise` 变量，来增大或减小随机噪声。

## 文件说明

### 主要脚本

- **`yooc_exam.py`** - 主考试脚本
  - 自动登录并参加考试
  - 支持题库功能，优先使用题库答案
  - 多选题采用全选策略

- **`build_question_bank.py`** - 题库构建脚本
  - 从考试结果API提取正确答案
  - 支持增量更新，不会覆盖已有题目
  - 自动解密答案并保存为JSON格式

- **`convert_to_letters.py`** - 答案格式转换脚本
  - 将数字答案（0,1,2,3）转换为字母（A,B,C,D）
  - 生成3种格式的答案文件供查询使用
  - 支持单选题和多选题

### 辅助文件

- **`yooc_crypto.py`** - 加密解密模块
  - 解密考试答案
  - 加密提交数据

- **`to_wrong.py`** - 错误答案生成（用于准确度控制）

- **`config.json`** - 配置文件
  - 存储用户认证信息
  - 设置考试参数

### 生成的文件

- **`question_bank.json`** - 题库文件（数字格式）
  - 包含题目ID、类型、正确答案
  - 自动增量更新
  - 供脚本自动答题使用

- **`question_bank_readable.txt`** - 可读文本格式题库（字母答案）
  - 按题型分类展示
  - 包含完整题目和字母答案（A/B/C/D）
  - 适合打印或查看
  - 运行 `convert_to_letters.py` 生成

## 题库功能特性

### 增量更新
- ✅ 保留已有题目，只添加新题
- ✅ 自动检测答案变化并更新
- ✅ 显示详细的更新统计

### 答题策略
- **单选题**：优先使用题库答案，无题库时使用解密答案
- **多选题**：优先使用题库答案，无题库时使用解密答案
- **填空题**：使用题库答案或解密答案

### 准确率对比
- **无题库**：约 40%（解密答案不准确）
- **有题库**：接近 100%（使用正确答案）

## 常见问题

**Q: 为什么第一次考试分数很低？**
A: 因为解密的答案不准确，需要先建立题库后再考试。

**Q: 题库会覆盖之前的数据吗？**
A: 不会，`build_question_bank.py` 采用增量更新模式，只添加新题目。

**Q: 如何查看题库中的答案？**
A: 可以查看 `question_bank_readable.txt` 查看详细内容，或运行 `convert_to_letters.py` 生成字母格式的答案。

**Q: 多选题会根据题库选择吗？**
A: 是的，多选题会优先使用题库中的正确答案，只选择正确的选项组合。

**Q: 可以修改题库吗？**
A: 可以，直接编辑 `question_bank.json` 文件即可。